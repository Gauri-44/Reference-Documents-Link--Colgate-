<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLA Reference Documents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8;
        }
        .container-card {
            background-color: #ffffff;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tab-button.active {
            background-color: #4f46e5;
            color: white;
            border-bottom-color: transparent;
        }
        .tab-button {
            transition: all 0.3s ease;
            position: relative;
        }
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 4px;
            background-color: #4f46e5;
        }
        .document-link-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            background-color: #f1f5f9;
        }
        .document-link-container:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="container-card rounded-2xl w-full max-w-4xl p-6 md:p-8">

        <div class="flex items-center justify-center mb-8">
            <div class="p-2 bg-indigo-500 rounded-full text-white mr-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m-5 4h4a2 2 0 002-2V6a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
            </div>
            <h1 class="text-xl md:text-2xl font-extrabold text-gray-900 tracking-tight">SLA Reference Documents</h1>
        </div>

        <div class="mb-6">
            <input type="text" id="search-input" placeholder="Search documents..." class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100 text-gray-900 placeholder-gray-500 transition-colors duration-300">
        </div>

        <div class="flex border-b-2 border-gray-300 mb-6 -mx-1 md:-mx-2">
            <button id="add-doc-tab" class="tab-button flex-1 py-3 px-4 text-center text-sm font-semibold text-gray-500 hover:text-indigo-500 hover:bg-gray-100 rounded-t-lg mx-1 md:mx-2">
                Add Document
            </button>
            <button id="horizon-tab" class="tab-button active flex-1 py-3 px-4 text-center text-sm font-semibold text-white bg-indigo-500 rounded-t-lg mx-1 md:mx-2">
                Horizon Team
            </button>
            <button id="servers-tab" class="tab-button flex-1 py-3 px-4 text-center text-sm font-semibold text-gray-500 hover:text-indigo-500 hover:bg-gray-100 rounded-t-lg mx-1 md:mx-2">
                Servers Team
            </button>
        </div>

        <div id="add-doc-content" class="tab-content hidden">
            <form id="add-document-form" class="space-y-4 p-4 bg-gray-100 rounded-xl">
                <div>
                    <label for="doc-name" class="block text-sm font-medium text-gray-700">Document Name (Optional if uploading file)</label>
                    <input type="text" id="doc-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <div>
                    <label for="doc-link" class="block text-sm font-medium text-gray-700">Document Link (Optional if uploading file)</label>
                    <input type="url" id="doc-link" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <div>
                    <label for="doc-file" class="block text-sm font-medium text-gray-700">Upload Document (Optional)</label>
                    <input type="file" id="doc-file" class="mt-1 block w-full text-sm text-gray-500
                                                             file:mr-4 file:py-2 file:px-4
                                                             file:rounded-full file:border-0
                                                             file:text-sm file:font-semibold
                                                             file:bg-indigo-50 file:text-indigo-700
                                                             hover:file:bg-indigo-100">
                </div>
                <div>
                    <label for="doc-team" class="block text-sm font-medium text-gray-700">Team</label>
                    <select id="doc-team" required class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        <option value="horizon">Horizon Team</option>
                        <option value="servers">Servers Team</option>
                    </select>
                </div>
                <button type="submit" class="w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300">
                    Add Document
                </button>
            </form>
            <div id="add-doc-message" class="mt-4 p-3 bg-green-500 text-white rounded-lg hidden"></div>
        </div>

        <div id="horizon-content" class="tab-content">
            <div class="flex justify-end mb-4 space-x-2">
                <button id="sort-horizon-asc" class="px-4 py-2 text-xs font-semibold text-gray-900 bg-gray-200 rounded-full hover:bg-gray-300 transition duration-300">A-Z</button>
                <button id="sort-horizon-desc" class="px-4 py-2 text-xs font-semibold text-gray-900 bg-gray-200 rounded-full hover:bg-gray-300 transition duration-300">Z-A</button>
            </div>
            <div class="space-y-2">
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/spreadsheets/d/1ho0vCFKMwv8ud1wtiR_1ATnCxSc2TKr_2fcxv-vomKI/edit?gid=1706048000#gid=1706048000" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">Endpoint Records in Horizon</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1o9ry5zZ1i69z2WWvvnEYP6zcYasf6F4hhnaAPdSNVeA/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">User Accesss Provisioning</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1FcRzx0cvZvrrQS7HrFEeCIFYkbOTKGFXOrTn_lCTGOo/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">App Provisioning</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1I0XRStaee_99SUAWRg2BvNDhuH7cSx8jTi1VMGwXiVw/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">Certificate Renewal</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1I0XRStaee_99SUAWRg2BvNDhuH7cSx8jTi1VMGwXiVw/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">Platform and Component Upgrade</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1B1XXl2cBFKQ6nIgcsHQhA2ueYcF9wOAuDHCVXDan1iM/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">SLA Doc for Horizon</h2>
                    </a>
                </div>
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1C3pBW-ODQX-U2oPVNWBXDlGo1GgMBylhKobZmqwCARQ/edit?tab=t.0" target="_blank" class="flex-grow">
                        <h2 class="text-sm font-semibold text-gray-900">Governance - for Horizon </h2>
                    </a>
                </div>
            </div>
        </div>

        <div id="servers-content" class="tab-content hidden">
            <div class="flex justify-end mb-4 space-x-2">
                <button id="sort-servers-asc" class="px-4 py-2 text-xs font-semibold text-gray-900 bg-gray-200 rounded-full hover:bg-gray-300 transition duration-300">A-Z</button>
                <button id="sort-servers-desc" class="px-4 py-2 text-xs font-semibold text-gray-900 bg-gray-200 rounded-full hover:bg-gray-300 transition duration-300">Z-A</button>
            </div>
            <div class="space-y-2">
                <div class="document-link-container p-2 rounded-xl">
                    <a href="https://docs.google.com/document/d/1CFwC01M9Pvbg2H8ZQfbiPpr7OXpGLYUJkgwBD_JaIVs/edit?usp=drive_link" target="_blank" class="flex-grow">
                        <h2 class="text-xs font-semibold text-gray-900">Patch Deployment - Troubleshooting Tanium</h2>
                    </a>
                </div>
         
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');
            const searchInput = document.getElementById('search-input');
            const addDocForm = document.getElementById('add-document-form');
            const addDocMessage = document.getElementById('add-doc-message');
            const docNameInput = document.getElementById('doc-name');
            const docLinkInput = document.getElementById('doc-link');
            const docFileInput = document.getElementById('doc-file');
            const horizonContent = document.getElementById('horizon-content');
            const serversContent = document.getElementById('servers-content');

            // Tab switching logic
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const currentActiveTab = document.querySelector('.tab-button.active');
                    if (currentActiveTab) {
                        currentActiveTab.classList.remove('active', 'bg-indigo-500', 'text-white');
                        currentActiveTab.classList.add('text-gray-500', 'hover:text-indigo-500', 'hover:bg-gray-100');
                    }
                    
                    contents.forEach(c => c.classList.add('hidden'));

                    tab.classList.add('active', 'bg-indigo-500', 'text-white');
                    tab.classList.remove('text-gray-500', 'hover:text-indigo-500', 'hover:bg-gray-100');

                    const targetId = tab.id.replace('-tab', '-content');
                    document.getElementById(targetId).classList.remove('hidden');

                    searchInput.value = '';
                    filterDocuments();
                });
            });

            // Add Document form submission logic
            addDocForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const docName = docNameInput.value;
                const docLink = docLinkInput.value;
                const docFile = docFileInput.files[0];
                const docTeam = document.getElementById('doc-team').value;

                let name = docName;
                let link = docLink;
                let isFile = false;

                if (docFile) {
                    name = docFile.name;
                    link = URL.createObjectURL(docFile);
                    isFile = true;
                } else if (docName && docLink) {
                    name = docName;
                    link = docLink;
                } else {
                    addDocMessage.textContent = 'Please provide either a document link and name, or upload a file.';
                    addDocMessage.classList.remove('hidden', 'bg-green-500');
                    addDocMessage.classList.add('bg-red-500');
                    setTimeout(() => {
                        addDocMessage.classList.add('hidden');
                    }, 3000);
                    return;
                }

                const newLinkContainer = createDocumentElement(name, link, isFile);

                if (docTeam === 'horizon') {
                    horizonContent.querySelector('.space-y-2').appendChild(newLinkContainer);
                } else if (docTeam === 'servers') {
                    serversContent.querySelector('.space-y-2').appendChild(newLinkContainer);
                }

                addDocMessage.textContent = `Document "${name}" has been added to the ${docTeam} team.`;
                addDocMessage.classList.remove('hidden', 'bg-red-500');
                addDocMessage.classList.add('bg-green-500');
                setTimeout(() => {
                    addDocMessage.classList.add('hidden');
                }, 3000);

                addDocForm.reset();
            });

            // Helper function to create a new document element
            const createDocumentElement = (name, link) => {
                const newLinkContainer = document.createElement('div');
                newLinkContainer.className = 'document-link-container p-2 rounded-xl';
                newLinkContainer.innerHTML = `
                    <a href="${link}" target="_blank" class="flex-grow">
                        <h2 class="text-xs font-semibold text-gray-900">${name}</h2>
                    </a>
                `;
                return newLinkContainer;
            };

            // Sorting logic
            const sortDocuments = (containerId, order) => {
                const container = document.getElementById(containerId).querySelector('.space-y-2');
                const documents = Array.from(container.querySelectorAll('.document-link-container'));

                documents.sort((a, b) => {
                    const textA = a.querySelector('h2').textContent.toLowerCase();
                    const textB = b.querySelector('h2').textContent.toLowerCase();
                    if (order === 'asc') {
                        return textA.localeCompare(textB);
                    } else {
                        return textB.localeCompare(textA);
                    }
                });

                documents.forEach(doc => container.appendChild(doc));
            };

            // Event listeners for sorting buttons
            document.getElementById('sort-horizon-asc').addEventListener('click', () => sortDocuments('horizon-content', 'asc'));
            document.getElementById('sort-horizon-desc').addEventListener('click', () => sortDocuments('horizon-content', 'desc'));
            document.getElementById('sort-servers-asc').addEventListener('click', () => sortDocuments('servers-content', 'asc'));
            document.getElementById('sort-servers-desc').addEventListener('click', () => sortDocuments('servers-content', 'desc'));

            // Search filtering logic
            const filterDocuments = () => {
                const searchValue = searchInput.value.toLowerCase();
                const activeContent = document.querySelector('.tab-content:not(.hidden)');
                if (!activeContent) return;
                const documents = activeContent.querySelectorAll('.document-link-container');

                documents.forEach(doc => {
                    const docTitle = doc.querySelector('h2').textContent.toLowerCase();
                    if (docTitle.includes(searchValue)) {
                        doc.style.display = 'flex';
                    } else {
                        doc.style.display = 'none';
                    }
                });
            };

            searchInput.addEventListener('input', filterDocuments);

            // Handle required attribute changes on form inputs
            docLinkInput.addEventListener('input', () => {
                if (docLinkInput.value.length > 0) {
                    docNameInput.setAttribute('required', 'required');
                    docFileInput.removeAttribute('required');
                } else {
                    docNameInput.removeAttribute('required');
                }
            });

            docFileInput.addEventListener('change', () => {
                if (docFileInput.files.length > 0) {
                    docLinkInput.removeAttribute('required');
                    docNameInput.removeAttribute('required');
                } else {
                    if (docLinkInput.value.length === 0) {
                        docNameInput.removeAttribute('required');
                    }
                }
            });

            addDocForm.addEventListener('change', () => {
                if (docLinkInput.value || docFileInput.files.length > 0) {
                    docNameInput.removeAttribute('required');
                    docLinkInput.removeAttribute('required');
                } else {
                    docNameInput.setAttribute('required', 'required');
                    docLinkInput.setAttribute('required', 'required');
                }
            });
        });
    </script>
</body>
</html>